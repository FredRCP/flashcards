<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcards App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body class="light">
    <nav>
        <div>
            <a href="#" class="active" onclick="showTab('home'); return false;">Home</a>
            <a href="#" onclick="showTab('study'); return false;">Estudo</a>
            <a href="#" onclick="showTab('manage'); return false;">Gerenciar</a>
            <a href="#" onclick="showTab('stats'); return false;">Estatísticas</a> <!-- Nova aba -->
        </div>
        <button id="theme-toggle" onclick="toggleTheme()"><i class="fas fa-adjust"></i> Mudar Tema</button>
    </nav>

    <main>
        <!-- Aba Home (sem alterações) -->
        <div id="home" class="tab-content active">
            <div class="welcome-container">
                <h1>Bem-vindo ao Flashcards App!</h1>
                <p>Aprenda de forma prática e divertida com nossos flashcards interativos. Escolha um tema, estude e gerencie seus cartões!</p>
                <button onclick="showTab('study')"><i class="fas fa-book"></i> Começar a Estudar</button>
            </div>
        </div>
    
        <!-- Aba Estudo -->
        <div id="study" class="tab-content">
            <div class="theme-selector">
                <select id="theme-select" onchange="changeTheme()">
                    <option value="all">Todos os Temas</option>
                </select>
                <input type="text" class="search-input" id="search" placeholder="Pesquisar..." onkeyup="searchFlashcards()">
            </div>
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            <div class="flashcard-container">
                <div class="flashcard" id="flashcard">
                    <div class="front" id="front">
                        <span class="theme-label" id="front-theme"></span>
                        <span class="content" id="front-content">Carregando...</span>
                    </div>
                    <div class="back" id="back">
                        <span class="theme-label" id="back-theme"></span>
                        <span class="content" id="back-content">Carregando...</span>
                    </div>
                </div>
            </div>
            <div class="buttons">
                <button id="prox" onclick="prevCard()" title="Anterior"><i class="fas fa-arrow-left"></i></button>
                <button id="prox" onclick="nextCard()" title="Próximo"><i class="fas fa-arrow-right"></i></button>
            </div>
            <div class="difficulty-buttons">
                <button onclick="rateDifficulty(1)" title="Difícil"><i class="fas fa-exclamation"></i></button>
                <button onclick="rateDifficulty(2)" title="Médio"><i class="fas fa-equals"></i></button>
                <button onclick="rateDifficulty(3)" title="Fácil"><i class="fas fa-check"></i></button>
            </div>
        </div>
    
        <!-- Nova Aba Estatísticas -->
        <div id="stats" class="tab-content">
            <div class="stats-container">
                <h2>Estatísticas</h2>
                <div class="stats-grid">
                    <div class="stats-box">
                        <h3>Geral</h3>
                        <div id="general-stats"></div>
                    </div>
                    <div class="stats-box">
                        <h3>Por Tema</h3>
                        <div id="theme-stats"></div>
                    </div>
                    <div class="stats-box">
                        <h3>Tempo de Estudo</h3>
                        <div id="time-stats"></div>
                    </div>
                </div>
            </div>
        </div>
    
        <!-- Aba Gerenciar (sem alterações) -->
        <div id="manage" class="tab-content">
            <div class="add-card-form">
                <button onclick="openAddModal()"><i class="fas fa-plus"></i> Adicionar Novo Cartão</button>
            </div>
            <div class="card-list" id="card-list"></div>
        </div>
    </main>

    <div id="modal" class="modal">
        <div class="modal-content">
            <h2 id="modal-title">Adicionar Cartão</h2>
            <textarea id="modal-front" placeholder="Pergunta (frente)" rows="3"></textarea>
            <textarea id="modal-back" placeholder="Resposta (verso) - texto ou fórmula" rows="3"></textarea>
            <button onclick="insertFormula('modal-back')" class="formula-btn"><i class="fas fa-square-root-alt"></i> Adicionar Fórmula</button>
            <input type="file" id="modal-image" accept="image/jpeg" onchange="previewImage()">
            <div id="image-preview" style="margin: 10px 0;"></div>
            <input type="text" id="modal-theme" placeholder="Tema (ex.: Nefrologia)">
            <div class="modal-buttons">
                <button onclick="saveCardFromModal()"><i class="fas fa-save"></i> Salvar</button>
                <button onclick="closeModal()"><i class="fas fa-times"></i> Cancelar</button>
            </div>
        </div>
    </div>

    <div id="formula-modal" class="modal">
        <div class="modal-content">
            <h2>Adicionar Fórmula</h2>
            <textarea id="formula-input" placeholder="Digite a fórmula em LaTeX (ex.: GFR = \frac{a}{b})" rows="3"></textarea>
            <div id="formula-preview" style="margin: 10px 0;"></div>
            <div class="modal-buttons">
                <button onclick="saveFormula()"><i class="fas fa-check"></i> Inserir</button>
                <button onclick="closeFormulaModal()"><i class="fas fa-times"></i> Cancelar</button>
            </div>
        </div>
    </div>

    <img class="logo" src="/assets/img/logo.png" alt="">
    <script src="/assets/js/app.js"></script>
</body>
</html>